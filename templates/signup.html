{% extends 'base.html' %}
{% block title %}Signup{% endblock %}

{% block body %}
    <h1>Join NittanyBusiness!</h1>

    <!-- Form to type in email and password to signup-->
    <form action='/signup' method='POST'>
        <h3>Login information</h3>
        <label for='email'>Email</label>
        <input type='text' name='email' required><br>
    
        <label for='password'>Password</label>
        <input type='password' name='password' required>
        <p>
            Password requirements: <br>
            1) Between 10 and 60 characters. <br>
            2) At least one lowercase and one uppercase character. <br>
            3) At least one special character ie:!@#$%^&*
        </p>
        
        <h3>What type of account would you like?</h3>
        <input type='radio' id='sellerType' name='accountType' value='seller' checked required>
        <label for='seller'>Seller</label><br>

        <input type='radio' id='buyerType' name='accountType' value='buyer' required>
        <label for='buyer'>Buyer</label><br>

        <input type='radio' id='helpDeskType' name='accountType' value='helpDesk' required>
        <label for='helpDesk'>Help Desk</label><br><br>

        <!-- Required fields for sellers and buyers -->
        <div id="notHelpDeskFields">
            <label for='businessName'>Business Name</label>
            <input type='text' name='businessName' required><br>

            <h3>What is your business address?</h3>
            <label for='addressStreet'>Street</label>
            <input type='text' name='addressStreet' required><br>

            <label for='addressCity'>City</label>
            <input type='text' name='addressCity' required><br>

            <label for='addressState'>State</label>
            <select name='addressState' required>
                <option value=AL>Alabama</option>
                <option value=AK>Alaska</option>
                <option value=AZ>Arizona</option>
                <option value=AR>Arkansas</option>
                <option value=CA>California</option>
                <option value=CO>Colorado</option>
                <option value=CT>Connecticut</option>
                <option value=DE>Delaware</option>
                <option value=FL>Florida</option>
                <option value=GA>Georgia</option>
                <option value=HI>Hawaii</option>
                <option value=ID>Idaho</option>
                <option value=IL>Illinois</option>
                <option value=IN>Indiana</option>
                <option value=IA>Iowa</option>
                <option value=KS>Kansas</option>
                <option value=KY>Kentucky</option>
                <option value=LA>Louisiana</option>
                <option value=ME>Maine</option>
                <option value=MD>Maryland</option>
                <option value=MA>Massachusetts</option>
                <option value=MI>Michigan</option>
                <option value=MN>Minnesota</option>
                <option value=MS>Mississippi</option>
                <option value=MS>Missouri</option>
                <option value=MO>Montana</option>
                <option value=NE>Nebraska</option>
                <option value=NV>Nevada</option>
                <option value=NH>New Hampshire</option>
                <option value=NJ>New Jersey</option>
                <option value=NM>New Mexico</option>
                <option value=NY>New York</option>
                <option value=NC>North Carolina</option>
                <option value=ND>North Dakota</option>
                <option value=OH>Ohio</option>
                <option value=OK>Oklahoma</option>
                <option value=OR>Oregon</option>
                <option value=PA>Pennsylvania</option>
                <option value=RI>Rhode Island</option>
                <option value=SC>South Carolina</option>
                <option value=SD>South Dakota</option>
                <option value=TN>Tennessee</option>
                <option value=TX>Texas</option>
                <option value=UT>Utah</option>
                <option value=VT>Vermont</option>
                <option value=VA>Virginia</option>
                <option value=WA>Washington</option>
                <option value=WV>West Virginia</option>
                <option value=WI>Wisconsin</option>
                <option value=WY>Wyoming</option>
            </select><br>

            <label for='addressZip'>Zip Code</label>
            <input type='text' name='addressZip' required><br><br>
        </div>


        <!-- Required fields for sellers -->
        <div id='sellerFields'>
            <label for='csNum'>Customer Service Number</label>
            <input type='text' name='csNum' required><br><br>
    
            <label for='bankAccountNum'>Bank Acccount Number</label>
            <input type='text' name='bankAccountNum' required><br>
    
            <label for='bankRoutingNum'>Bank Routing Number</label>
            <input type='text' name='bankRoutingNum' required><br>
    
            <label for='bankBalance'>Bank Balance</label>
            <input type='text' name='bankBalance' required><br><br>
        </div>


        <!-- Required fields for buyers -->
        <div id='buyerFields'>
            <label for='cardNumber'>Card Number</label>
            <input type='text' name='cardNumber' required><br>

            <label for='cardType'>Card Type</label>
            <select name='cardType' required>
                <option value='Master'>Master</option>
                <option value='Discover'>Discover</option>
                <option value='American Express'>American Express</option>
                <option value='Visa'>Visa</option>
            </select><br>

            <label for='cardExpDate'>Expiration Date</label>
            <select name='cardExpDate'>
                <option value='01'>01</option>
                <option value='02'>02</option>
                <option value='03'>03</option>
                <option value='04'>04</option>
                <option value='05'>05</option>
                <option value='06'>06</option>
                <option value='07'>07</option>
                <option value='08'>08</option>
                <option value='09'>09</option>
                <option value='10'>10</option>
                <option value='11'>11</option>
                <option value='12'>12</option>
            </select>
            -
            <select name='cardExpDate'>
                <option value='2025'>2025</option>
                <option value='2026'>2026</option>
                <option value='2027'>2027</option>
                <option value='2028'>2028</option>
                <option value='2029'>2029</option>
                <option value='2030'>2030</option>
                <option value='2031'>2031</option>
                <option value='2032'>2032</option>
                <option value='2033'>2033</option>
                <option value='2034'>2034</option>
                <option value='2035'>2035</option>
                <option value='2036'>2036</option>
                <option value='2037'>2037</option>
                <option value='2038'>2038</option>
                <option value='2039'>2039</option>
            </select><br>

            <label for='cardSecurityCode'>Security Code</label>
            <input type='text' name='cardSecurityCode' required><br><br>
        </div>


        <!-- Required fields for helpDesk -->
        <div id='helpDeskFields'>
            <label for='position' class='helpDeskField'>Job Postion</label>
            <input type='text' name='position' class='helpDeskField' required><br><br>
        </div>

        
        <button type='submit' href='signup'>Sign Up</button>
        <a href='/login' role='button'>Already have an account?</a>
    </form>

    {% if existingUser %}
        <p style='color: red;'>This email has already been registered.</p>
    {% endif %}

    {% for field in invalidFields %}
        <p>Error in {{ field }} field.</p>
    {% endif %}

    <script>

        window.onload = function() {
            showNeededFields();
        }

        document.querySelector('form').addEventListener('change', function() {
            showNeededFields();
        });

        function showNeededFields() {
            // Check which account type is selected and show only the input fields required for that type.
            if (document.getElementById('sellerType').checked) {
                document.getElementById('sellerFields').style.display = 'inline';
                document.getElementById('buyerFields').style.display = 'none';
                document.getElementById('helpDeskFields').style.display = 'none';

                document.getElementById('notHelpDeskFields').style.display = 'inline';

                document.getElementById('sellerFields').querySelectorAll('input').forEach(input => {
                    input.required = true;
                });
                document.getElementById('buyerFields').querySelectorAll('input').forEach(input => {
                    input.required = false;
                });
                document.getElementById('helpDeskFields').querySelectorAll('input').forEach(input => {
                    input.required = false;
                });

            }
            if (document.getElementById('buyerType').checked) {
                document.getElementById('sellerFields').style.display = 'none';
                document.getElementById('buyerFields').style.display = 'inline';
                document.getElementById('helpDeskFields').style.display = 'none';

                document.getElementById('notHelpDeskFields').style.display = 'inline';

                document.getElementById('sellerFields').querySelectorAll('input').forEach(input => {
                    input.required = false;
                });
                document.getElementById('buyerFields').querySelectorAll('input').forEach(input => {
                    input.required = true;
                });
                document.getElementById('helpDeskFields').querySelectorAll('input').forEach(input => {
                    input.required = false;
                });

            } 
            if (document.getElementById('helpDeskType').checked) {
                document.getElementById('sellerFields').style.display = 'none';
                document.getElementById('buyerFields').style.display = 'none';
                document.getElementById('helpDeskFields').style.display = 'inline';

                document.getElementById('notHelpDeskFields').style.display = 'none';

                document.getElementById('sellerFields').querySelectorAll('input').forEach(input => {
                    input.required = false;
                });
                document.getElementById('buyerFields').querySelectorAll('input').forEach(input => {
                    input.required = false;
                });
                document.getElementById('helpDeskFields').querySelectorAll('input').forEach(input => {
                    input.required = true;
                });
            }
        }

    </script>
{% endblock %}